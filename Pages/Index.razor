@page "/"
@inject EhSearchingService searchingService
@inject OptionsStorageService optionsStorage
@inject IJSRuntime jsRuntime
@inject IDialogService dialogService

<MudGrid>
    <MudItem xs="2" sm="2" md="2" lg="2">
        <MudIconButton Icon="@Icons.Material.Filled.Search" Color="Color.Primary" OnClick="OpenSearchDialog"></MudIconButton>
    </MudItem>
</MudGrid>
<MudDivider />
<MudGrid>
    @foreach (var m in metadata)
    {
        <MudItem xs="6" sm="6" md="4" lg="3">
            <MudCard>
                <MudCardMedia Image="@m.thumb" Height="200" />
                <MudCardContent>
                    <MudText Typo="Typo.h6">@m.title</MudText>
                </MudCardContent>
            </MudCard>
        </MudItem>
    }
    <MudItem xs="6" sm="6" md="4" lg="3">
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="PerformSearch">
            @if (searching)
            {
                <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                <MudText Class="ms-2">Loading</MudText>
            }
            else
            {
                <MudText Class="ms-2">Load More</MudText>
            }
        </MudButton>
    </MudItem>
</MudGrid>
