@page "/"
@inject EhSearchingService searchingService
@inject OptionsStorageService optionsStorage
@inject IJSRuntime jsRuntime

<MudGrid>
    <MudItem xs="12" sm="12" md="10" lg="10">
        <MudTextField @bind-Value="queryStr" Label="Search" Variant="Variant.Outlined"></MudTextField>
    </MudItem>
    <MudItem xs="12" sm="12" md="2" lg="2">
        <MudButton Disabled=@searching Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Search" Color="Color.Primary" OnClick="PerformSearch">
            @if (searching)
            {
                <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                <MudText Class="ms-2">Searching</MudText>
            }
            else
            {
                <MudText>Search</MudText>
            }
        </MudButton>
    </MudItem>
</MudGrid>
<MudDivider />
<MudGrid>
    @foreach (var m in metadata)
    {
        <MudItem xs="12" sm="6" md="4" lg="3">
            <MudCard>
                <MudCardMedia Image="@m.base64String" Height="200" />
                <MudCardContent>
                    <MudText Typo="Typo.h6">@m.Metadata.title</MudText>
                </MudCardContent>
            </MudCard>
        </MudItem>
    }
    <MudItem xs="12" sm="6" md="4" lg="3">
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="PerformSearch">Load More</MudButton>
    </MudItem>
</MudGrid>
